<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rlenvscpp &mdash; rlenvscpp 1.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=b51e6972"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference.html" />
    <link rel="prev" title="GymFromCpp" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            rlenvscpp
          </a>
              <div class="version">
                1.8.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">rlenvscpp</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environments">Environments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use">How to use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dynamics">Dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-the-tests">Run the tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#issues">Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#could-not-find-boost-system">Could not find <code class="docutils literal notranslate"><span class="pre">boost_system</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fastapi-throws-422-unpocessable-entity">FastAPI throws 422 Unpocessable entity</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">rlenvscpp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">rlenvscpp</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <a class="reference external image-reference" href="https://github.com/pockerman/rlenvs_from_cpp/actions/workflows/build.yml"><img alt="Build rlenvs" src="https://github.com/pockerman/rlenvs_from_cpp/actions/workflows/build.yml/badge.svg" /></a>
<section id="rlenvscpp">
<h1>rlenvscpp<a class="headerlink" href="#rlenvscpp" title="Link to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">rlenvscpp</span></code> is an effort to provide implementations and wrappers of environments suitable for training reinforcement learning agents
using  C++. In addition, the library provides various utilities such as experiment tracking,
representing trajectories  via waypoints and simple implementation of popular dynamics such as
quadrotor dynamics.</p>
<section id="environments">
<h2>Environments<a class="headerlink" href="#environments" title="Link to this heading"></a></h2>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">rlenvscpp</span></code> provides the following environments:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Environment</p></th>
<th class="head"><p>Use REST</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FrozenLake 4x4 map</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_1/example_1.cpp">example_1</a></span></p></td>
</tr>
<tr class="row-odd"><td><p>FrozenLake 8x8 map</p></td>
<td><p>Yes</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-even"><td><p>Blackjack</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_1/example_1.cpp">example_1</a></span></p></td>
</tr>
<tr class="row-odd"><td><p>CliffWalking</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_1/example_1.cpp">example_1</a></span></p></td>
</tr>
<tr class="row-even"><td><p>CartPole</p></td>
<td><p>Yes</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-odd"><td><p>MountainCar</p></td>
<td><p>Yes</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-even"><td><p>Taxi</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_1/example_1.cpp">example_1</a></span></p></td>
</tr>
<tr class="row-odd"><td><p>Pendulum</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_6/example_6.cpp">example_6</a></span></p></td>
</tr>
<tr class="row-even"><td><p>Acrobot</p></td>
<td><p>Yes</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-odd"><td><p>GymWalk</p></td>
<td><p>Yes</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-even"><td><p>gym-pybullet-drones</p></td>
<td><p>TODO</p></td>
<td><p>TODO</p></td>
</tr>
<tr class="row-odd"><td><p>GridWorld</p></td>
<td><p>No</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_5/example_5.cpp">example_5</a></span></p></td>
</tr>
<tr class="row-even"><td><p>Connect2</p></td>
<td><p>No</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_7/example_7.cpp">example_7</a></span></p></td>
</tr>
</tbody>
</table>
<p>The Gymnasium (former OpenAI-Gym) environments utilise a REST API to communicate requests to/from the
environment and <code class="docutils literal notranslate"><span class="pre">rlenvscpp</span></code>.</p>
<p>Some environments have a vector implementation meaning multiple instances of the same
environment. Currently, <code class="docutils literal notranslate"><span class="pre">rlenvscpp</span></code> provides the following vector environments:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Environment</p></th>
<th class="head"><p>Use REST</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AcrobotV</p></td>
<td><p>Yes</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_8/example_8.cpp">example_8</a></span></p></td>
</tr>
</tbody>
</table>
<p>Various RL algorithms using the environments can be found at <span class="raw-html-m2r"><a href="https://github.com/pockerman/cuberl/tree/master">cuberl</a></span>.</p>
<section id="how-to-use">
<h3>How to use<a class="headerlink" href="#how-to-use" title="Link to this heading"></a></h3>
<p>The following is an example how to use the
<code class="docutils literal notranslate"><span class="pre">FrozenLake</span></code>   environment from <span class="raw-html-m2r"><a href="https://github.com/Farama-Foundation/Gymnasium/tree/main">Gymnasium</a></span>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rlenvs/rlenvs_types_v2.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rlenvs/envs/gymnasium/toy_text/frozen_lake_env.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rlenvs/envs/api_server/apiserver.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unordered_map&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;any&gt;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">example_1</span><span class="p">{</span>

<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">SERVER_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://0.0.0.0:8001/api&quot;</span><span class="p">;</span>

<span class="k">using</span><span class="w"> </span><span class="n">rlenvscpp</span><span class="o">::</span><span class="n">envs</span><span class="o">::</span><span class="n">gymnasium</span><span class="o">::</span><span class="n">FrozenLake</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">rlenvscpp</span><span class="o">::</span><span class="n">envs</span><span class="o">::</span><span class="n">RESTApiServerWrapper</span><span class="p">;</span>


<span class="kt">void</span><span class="w"> </span><span class="nf">test_frozen_lake</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">RESTApiServerWrapper</span><span class="o">&amp;</span><span class="w"> </span><span class="n">server</span><span class="p">){</span>

<span class="w">    </span><span class="n">FrozenLake</span><span class="o">&lt;</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="n">env</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Environame URL: &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">get_url</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// make the environment</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any</span><span class="o">&gt;</span><span class="w"> </span><span class="n">options</span><span class="p">;</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="s">&quot;is_slippery&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">});</span>
<span class="w">    </span><span class="n">env</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Is environment created? &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">is_created</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Is environment alive? &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">is_alive</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Number of valid actions? &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">n_actions</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Number of states? &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">n_states</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// reset the environment</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">time_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Reward on reset: &quot;</span><span class="o">&lt;&lt;</span><span class="n">time_step</span><span class="p">.</span><span class="n">reward</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Observation on reset: &quot;</span><span class="o">&lt;&lt;</span><span class="n">time_step</span><span class="p">.</span><span class="n">observation</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Is terminal state: &quot;</span><span class="o">&lt;&lt;</span><span class="n">time_step</span><span class="p">.</span><span class="n">done</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">//...print the time_step</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">time_step</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// take an action in the environment</span>
<span class="w">    </span><span class="c1">// 2 = RIGHT</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">new_time_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">new_time_step</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// get the dynamics of the environment for the given state and action</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">dynamics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">p</span><span class="p">(</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">action</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Dynamics for state=&quot;</span><span class="o">&lt;&lt;</span><span class="n">state</span><span class="o">&lt;&lt;</span><span class="s">&quot; and action=&quot;</span><span class="o">&lt;&lt;</span><span class="n">action</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">item</span><span class="o">:</span><span class="n">dynamics</span><span class="p">){</span>

<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">sample_action</span><span class="p">();</span>
<span class="w">    </span><span class="n">new_time_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">new_time_step</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// synchronize the environment</span>
<span class="w">    </span><span class="n">env</span><span class="p">.</span><span class="n">sync</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">copy_env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">make_copy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="n">copy_env</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Org env cidx: &quot;</span><span class="o">&lt;&lt;</span><span class="n">env</span><span class="p">.</span><span class="n">cidx</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Copy env cidx: &quot;</span><span class="o">&lt;&lt;</span><span class="n">copy_env</span><span class="p">.</span><span class="n">cidx</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="n">copy_env</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// close the environment</span>
<span class="w">    </span><span class="n">env</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="p">}</span>

<span class="p">}</span>


<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(){</span>

<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">example_1</span><span class="p">;</span>

<span class="w">    </span><span class="n">RESTApiServerWrapper</span><span class="w"> </span><span class="nf">server</span><span class="p">(</span><span class="n">SERVER_URL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Testing FrozenLake...&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">example_1</span><span class="o">::</span><span class="n">test_frozen_lake</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;====================&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In general, the environments exposed by the library  follow the semantics in <span class="raw-html-m2r"><a href="https://github.com/deepmind/dm_env/blob/master/docs/index.md">Environment API and Semantics</a></span> specification.
For more details see the <span class="raw-html-m2r"><a href="doc/env_spec.md">```rlenvscpp``</span> environment specification&lt;/a&gt;` document.</p>
<p>The general use case is to build the library and link it with your driver code to access its functionality.
The environments specified as using REST in the tables above, that is all <code class="docutils literal notranslate"><span class="pre">Gymnasium</span></code>, <code class="docutils literal notranslate"><span class="pre">gym_pybullet_drones</span></code> and <code class="docutils literal notranslate"><span class="pre">GymWalk</span></code>
environments are accessed via a client/server pattern. Namely, they are exposed via an API developed using
<span class="raw-html-m2r"><a href="https://fastapi.tiangolo.com/">FastAPI</a></span>.
You need to fire up the FastAPI server, see dependencies, before using the environments in your code.
To do so</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">start_uvicorn</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal notranslate"><span class="pre">uvicorn</span></code> server listents on port 8001. Change this if needed. You can access the OpenAPI specification at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8001</span><span class="o">/</span><span class="n">docs</span>
</pre></div>
</div>
<p>Note that currently the implementation is not thread/process safe i.e. if multiple threads/processes access the environment
a global instance of the environment is manipulated. Thus no session based environment exists.
However, you can create copies of the same environment and access this via its dedicate index.
If just one thread/process touches this specific environment you should be ok.
Notice that the FastAPI server only uses a single process to manage all the environments.
In addition, if  you need multiple instances of the same environment you can also  use one
of the exissting vectorised environments (see table above).</p>
<p>Finally,   you can choose to launch several instances of <code class="docutils literal notranslate"><span class="pre">uvirocrn</span></code> (listening on different ports).
However in this case you need to implement all the interactions logic yourself as currently no implementation exists to handle such a scenario.</p>
</section>
</section>
<section id="dynamics">
<h2>Dynamics<a class="headerlink" href="#dynamics" title="Link to this heading"></a></h2>
<p>Apart from the exposed environments, <code class="docutils literal notranslate"><span class="pre">rlenvscpp</span></code> exposes classes that
describe the dynamics of some popular rigid bodies:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dynamics</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Differential drive</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_9/example_9.cpp">example_9</a></span></p></td>
</tr>
<tr class="row-odd"><td><p>Quadrotor</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_10/example_10.cpp">example_10</a></span></p></td>
</tr>
<tr class="row-even"><td><p>Bicycle vehicle</p></td>
<td><p>TODO</p></td>
</tr>
</tbody>
</table>
</section>
<section id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Environment trajectory</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_3/example_3.cpp">example_3</a></span></p></td>
</tr>
<tr class="row-odd"><td><p>WaypointTrajectory</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_11/example_11.cpp">example_11</a></span></p></td>
</tr>
<tr class="row-even"><td><p>TensorboardServer</p></td>
<td><p><span class="raw-html-m2r"><a href="examples/example_12/example_12.cpp">example_12</a></span></p></td>
</tr>
</tbody>
</table>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<p>The library has the following general dependencies</p>
<ul class="simple">
<li><p>A compiler that supports C++20 e.g. g++-11</p></li>
<li><p><span class="raw-html-m2r"><a href="https://www.boost.org/">Boost C++</a></span></p></li>
<li><p><span class="raw-html-m2r"><a href="https://cmake.org/">CMake</a></span> &gt;= 3.10</p></li>
<li><p><span class="raw-html-m2r"><a href="https://github.com/google/googletest">Gtest</a></span> (if configured with tests)</p></li>
<li><p><span class="raw-html-m2r"><a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen3</a></span></p></li>
</ul>
<p>Using the Gymnasium environments requires <span class="raw-html-m2r"><a href="https://github.com/Farama-Foundation/Gymnasium/tree/main">Gymnasium</a></span> installed on your machine.
In addition, you need to install</p>
<ul class="simple">
<li><p><span class="raw-html-m2r"><a href="https://fastapi.tiangolo.com/">FastAPI</a></span></p></li>
<li><p><span class="raw-html-m2r"><a href="https://www.uvicorn.org/">Uvicorn</a></span></p></li>
<li><p><span class="raw-html-m2r"><a href="https://docs.pydantic.dev/latest/">Pydantic</a></span></p></li>
</ul>
<p>By installing the requirement under <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> should set your Python environment  up correctly.</p>
<p>In addition, the library also incorporates, see <code class="docutils literal notranslate"><span class="pre">(src/extern)</span></code>, the following libraries</p>
<ul class="simple">
<li><p><span class="raw-html-m2r"><a href="https://github.com/elnormous/HTTPRequest">HTTPRequest</a></span></p></li>
<li><p><span class="raw-html-m2r"><a href="https://github.com/nlohmann/json">nlohmann/json</a></span></p></li>
</ul>
<p>There are extra dependencies if you want to generate the documentation. Namely,</p>
<ul class="simple">
<li><p>Doxygen</p></li>
<li><p>Sphinx</p></li>
<li><p>sphinx_rtd_theme</p></li>
<li><p>breathe</p></li>
<li><p>m2r2</p></li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>The usual CMake based installation process is used. Namely</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cmake</span> <span class="o">..</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>You can toggle the following variables</p>
<ul class="simple">
<li><p>CMAKE_BUILD_TYPE (default is RELEASE)</p></li>
<li><p>ENABLE_TESTS_FLAG (default is OFF)</p></li>
<li><p>ENABLE_EXAMPLES_FLAG (default is OFF)</p></li>
<li><p>ENABLE_DOC_FLAG (default is OFF)</p></li>
</ul>
<p>For example enbling the examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DENABLE_EXAMPLES_FLAG</span><span class="o">=</span><span class="n">ON</span> <span class="o">..</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<section id="run-the-tests">
<h3>Run the tests<a class="headerlink" href="#run-the-tests" title="Link to this heading"></a></h3>
<p>You can execute all the tests by running the helper script <code class="docutils literal notranslate"><span class="pre">execute_tests.sh</span></code>.</p>
</section>
<section id="issues">
<h3>Issues<a class="headerlink" href="#issues" title="Link to this heading"></a></h3>
<section id="could-not-find-boost-system">
<h4>Could not find <code class="docutils literal notranslate"><span class="pre">boost_system</span></code><a class="headerlink" href="#could-not-find-boost-system" title="Link to this heading"></a></h4>
<p>It is likely that you are missing the boost_system library with your local Boost installation. This may be the case
is you installed boost via a package manager. On a Ubuntu machine the following should resolve the issue</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">-</span><span class="n">y</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libboost</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</section>
<section id="fastapi-throws-422-unpocessable-entity">
<h4>FastAPI throws 422 Unpocessable entity<a class="headerlink" href="#fastapi-throws-422-unpocessable-entity" title="Link to this heading"></a></h4>
<p>Typically, this is a problem with how the client (400-range error) specified the data
to be sent to the server.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="GymFromCpp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_reference.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, rlenvscpp Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>